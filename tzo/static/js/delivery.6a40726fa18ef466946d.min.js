webpackJsonp([9,15],{119:function(t,e,s){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=s(8),n=a(i),o=s(7),r=a(o),c=s(5),l=a(c),d=s(4),u=s(6),v=a(u),p=s(10),m=a(p),_=s(9);e.default={data:function(){return{showLoading:!0,showError:!1,bill:null,express:null,message:"",exceptionMessage:""}},mounted:function(){this.initData()},computed:(0,l.default)({},(0,d.mapState)(["globalPropertyList","userInfo"])),components:{headerTitle:v.default,loading:m.default},methods:(0,l.default)({},(0,d.mapActions)(["getGlobalProperty"]),{initData:function(){var t=this;return(0,r.default)(n.default.mark(function e(){var s,a;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getGlobalProperty();case 2:return s=t.$route.params.Id,a=t.$route.params.BillId,e.next=6,(0,_.apiGetDeal)(a);case 6:return t.bill=e.sent,e.next=9,(0,_.apiGetExpress)(s);case 9:t.express=e.sent,t.express.Shippers.push({Shipper:t.userInfo.UserId,Workload:t.bill.GoodsTotalNum}),t.showLoading=!1;case 12:case"end":return e.stop()}},e,t)}))()},confirm:function(){var t=this;return(0,r.default)(n.default.mark(function e(){var s;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,_.apiSaveExpress)(t.express);case 2:if(s=e.sent,!s.Id){e.next=6;break}return e.next=6,(0,_.apiSendOutExpress)(s.Id);case 6:s.Message?(t.showError=!0,t.message=s.Message,t.exceptionMessage=s.ExceptionMessage):t.$router.replace("/delivery");case 7:case"end":return e.stop()}},e,t)}))()},showErrorFun:function(){this.showError=!this.showError}})}},120:function(t,e,s){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=s(8),n=a(i),o=s(7),r=a(o),c=s(5),l=a(c),d=s(4),u=s(6),v=a(u),p=s(10),m=a(p),_=s(9);e.default={data:function(){return{showLoading:!0,changeShowType:"undone",expressList:[]}},mounted:function(){this.initData()},computed:(0,l.default)({},(0,d.mapState)(["curExpress"]),{Undone:function(){return this.expressList.filter(function(t){return 2===t.LogisticsStatus})},Complete:function(){return this.expressList.filter(function(t){return 3===t.LogisticsStatus})}}),components:{headerTitle:v.default,loading:m.default},methods:{initData:function(){var t=this;return(0,r.default)(n.default.mark(function e(){var s,a;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=new Date,s.setHours(0,0,0,0),a=new Date,a.setHours(23,59,59,999),e.next=6,(0,_.apiGetExpresses)([2,3],s,a,t.curExpress.Id).then(function(e){return t.expressList=e.Items});case 6:t.showLoading=!1;case 7:case"end":return e.stop()}},e,t)}))()}}}},229:function(t,e,s){e=t.exports=s(2)(),e.push([t.id,".money[data-v-6dec36d6],.number[data-v-6dec36d6]{font-size:.55rem}","",{version:3,sources:["/./src/page/delivery/list/delivery-list.vue"],names:[],mappings:"AACA,iDAAiD,gBAAgB,CAChE",file:"delivery-list.vue",sourcesContent:["\n.number[data-v-6dec36d6],.money[data-v-6dec36d6]{font-size:.55rem\n}\n"],sourceRoot:"webpack://"}])},233:function(t,e,s){e=t.exports=s(2)(),e.push([t.id,".item-list[data-v-75a2857b]{margin-top:.4rem}.confirm_details[data-v-75a2857b]{position:fixed;top:0;left:0;right:0;bottom:0;background-color:#262626;z-index:200;padding:1.25rem}.confirm_details .title[data-v-75a2857b]{text-align:center;font-size:.8rem;color:#fff}.confirm_details .close_activities[data-v-75a2857b]{bottom:1rem;position:absolute;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%)}.confirm_details p[data-v-75a2857b]{margin-top:2rem;line-height:.7rem;font-size:.65rem;color:#fff}.confirm[data-v-75a2857b]{position:fixed;bottom:0;width:100%}.confirm p[data-v-75a2857b]{line-height:2rem;font-size:.75rem;color:#fff;background-color:#56d176;text-align:center}","",{version:3,sources:["/./src/page/delivery/detail/delivery-detail.vue"],names:[],mappings:"AACA,4BAA4B,gBAAgB,CAC3C,AACD,kCAAkC,eAAe,MAAM,OAAO,QAAQ,SAAS,yBAAyB,YAAY,eAAe,CAClI,AACD,yCAAyC,kBAAkB,gBAAgB,UAAU,CACpF,AACD,oDAAsE,YAAY,kBAAkB,SAAS,mCAAmC,AAA+B,0BAA0B,CACxM,AACD,oCAAoC,gBAAgB,kBAAkB,iBAAiB,UAAU,CAChG,AACD,0BAA0B,eAAe,SAAS,UAAU,CAC3D,AACD,4BAA4B,iBAAiB,iBAAiB,WAAW,yBAAyB,iBAAiB,CAClH",file:"delivery-detail.vue",sourcesContent:["\n.item-list[data-v-75a2857b]{margin-top:.4rem\n}\n.confirm_details[data-v-75a2857b]{position:fixed;top:0;left:0;right:0;bottom:0;background-color:#262626;z-index:200;padding:1.25rem\n}\n.confirm_details .title[data-v-75a2857b]{text-align:center;font-size:.8rem;color:#fff\n}\n.confirm_details .close_activities[data-v-75a2857b]{position:absolute;bottom:1rem;position:absolute;left:50%;-webkit-transform:translateX(-50%);-ms-transform:translateX(-50%);transform:translateX(-50%)\n}\n.confirm_details p[data-v-75a2857b]{margin-top:2rem;line-height:.7rem;font-size:.65rem;color:#fff\n}\n.confirm[data-v-75a2857b]{position:fixed;bottom:0;width:100%\n}\n.confirm p[data-v-75a2857b]{line-height:2rem;font-size:.75rem;color:#fff;background-color:#56d176;text-align:center\n}\n"],sourceRoot:"webpack://"}])},274:function(t,e,s){var a=s(229);"string"==typeof a&&(a=[[t.id,a,""]]);s(3)(a,{});a.locals&&(t.exports=a.locals)},278:function(t,e,s){var a=s(233);"string"==typeof a&&(a=[[t.id,a,""]]);s(3)(a,{});a.locals&&(t.exports=a.locals)},316:function(t,e,s){s(278);var a=s(1)(s(119),s(392),"data-v-75a2857b",null);t.exports=a.exports},317:function(t,e,s){s(274);var a=s(1)(s(120),s(388),"data-v-6dec36d6",null);t.exports=a.exports},388:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page"},[s("header-title",{attrs:{"header-title":"送货",goback:"true"}}),t._v(" "),t.showLoading?t._e():s("section",{staticClass:"scroll_container paddingTop"},[s("section",{ref:"chooseType",staticClass:"m-tabs"},[s("div",{staticClass:"item"},[s("span",{class:{active:"undone"==t.changeShowType},on:{click:function(e){t.changeShowType="undone"}}},[t._v("待送")])]),t._v(" "),s("div",{staticClass:"item"},[s("span",{class:{active:"complete"==t.changeShowType},on:{click:function(e){t.changeShowType="complete"}}},[t._v("完成")])])]),t._v(" "),s("transition",{attrs:{name:"m-tab-choose"}},[s("section",{directives:[{name:"show",rawName:"v-show",value:"undone"==t.changeShowType,expression:"changeShowType =='undone'"}],staticClass:"m-tab-container order-list"},t._l(t.Undone,function(e){return s("router-link",{key:e.Id,staticClass:"item",attrs:{to:"/delivery/detail/"+e.Id+"/"+e.BillId,tag:"section"}},[s("section",{staticClass:"title"},[s("h3",{staticClass:"name ellipsis"},[s("strong",[t._v(t._s(e.CustomerName))])]),t._v(" "),s("section",[t._v("\n                            "+t._s(t._f("time")(e.BizDateTime))+"\n                        ")])]),t._v(" "),s("section",{staticClass:"content"},[s("section",[s("span",[t._v("单号:")]),t._v(" "),s("span",[t._v(t._s(e.BillNo))])]),t._v(" "),s("section",[s("span",[t._v("状态:")]),t._v(" "),s("b",{class:{money:2==e.LogisticsStatus,number:3==e.LogisticsStatus}},[t._v(t._s(e.LogisticsStatusName))])]),t._v(" "),s("section",[s("span",[t._v("仓库:")]),t._v(" "),s("span",[t._v(t._s(e.StorageName))])])])])}))]),t._v(" "),s("transition",{attrs:{name:"m-tab-choose"}},[s("section",{directives:[{name:"show",rawName:"v-show",value:"complete"==t.changeShowType,expression:"changeShowType =='complete'"}],staticClass:"m-tab-container order-list"},t._l(t.Complete,function(e){return s("router-link",{key:e.Id,staticClass:"item",attrs:{to:"/delivery/detail/"+e.Id+"/"+e.BillId,tag:"section"}},[s("section",{staticClass:"title"},[s("h3",{staticClass:"name ellipsis"},[s("strong",[t._v(t._s(e.CustomerName))])]),t._v(" "),s("section",[t._v("\n                            "+t._s(t._f("time")(e.BizDateTime))+"\n                        ")])]),t._v(" "),s("section",{staticClass:"content"},[s("section",[s("span",[t._v("单号:")]),t._v(" "),s("span",[t._v(t._s(e.BillNo))])]),t._v(" "),s("section",[s("span",[t._v("状态:")]),t._v(" "),s("b",{class:{money:2==e.LogisticsStatus,number:3==e.LogisticsStatus}},[t._v(t._s(e.LogisticsStatusName))])]),t._v(" "),s("section",[s("span",[t._v("仓库:")]),t._v(" "),s("span",[t._v(t._s(e.StorageName))])])])])}))])],1),t._v(" "),s("transition",{attrs:{name:"router-slid",mode:"out-in"}},[s("router-view")],1),t._v(" "),s("transition",{attrs:{name:"loading"}},[s("loading",{directives:[{name:"show",rawName:"v-show",value:t.showLoading,expression:"showLoading"}]})],1)],1)},staticRenderFns:[]}},392:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page rating"},[s("header-title",{attrs:{"header-title":"送货明细",goback:"true"}}),t._v(" "),t.showLoading?t._e():s("section",{staticClass:"scroll_container paddingTop"},[s("section",{staticClass:"m-form-list"},[s("section",{staticClass:"item start"},[s("h2",[t._v("单号")]),t._v(" "),s("div",{staticClass:"content"},[s("p",[t._v(t._s(t.bill.BillNo))])])]),t._v(" "),s("section",{staticClass:"item end"},[s("h2",[t._v("状态")]),t._v(" "),s("div",{staticClass:"content"},[s("p",[s("span",{class:{red:2==t.express.LogisticsStatus,green:3==t.express.LogisticsStatus}},[t._v(t._s(t.express.LogisticsStatusName))])])])])]),t._v(" "),s("section",{staticClass:"item-list"},[s("header",[t._v("\n                "+t._s(t.bill.CustomerName)+"\n            ")]),t._v(" "),t._l(t.bill.Items,function(e){return s("section",{key:e.Id,staticClass:"item"},[s("section",{staticClass:"item-left"},[s("section",{staticClass:"title"},[s("h3",{staticClass:"name ellipsis"},[s("strong",[t._v(t._s(e.GoodsName))])])]),t._v(" "),s("section",{staticClass:"content"},t._l(t.globalPropertyList,function(a){return s("section",{key:a.Id},[s("span",[t._v(t._s(a.Name))]),t._v(":\n                            "),s("span",[t._v(t._s(e.Goods.Properties["p"+a.Id]))])])}))]),t._v(" "),s("div",{staticClass:"detail"},[s("div",[s("span",[t._v("x")]),t._v(" "),s("span",{staticClass:"number"},[t._v(t._s(e.GoodsNum))]),t._v(" "),s("span",[t._v(t._s(e.Units))])])])])})],2),t._v(" "),s("section",{staticClass:"m-form-list"},[s("section",{staticClass:"item start"},[s("h2",[t._v("联系人")]),t._v(" "),s("div",{staticClass:"content"},[s("p",[t._v(t._s(t.express.Contacts))])])]),t._v(" "),s("section",{staticClass:"item"},[s("h2",[t._v("电话")]),t._v(" "),s("div",{staticClass:"content"},[s("p",[t._v(t._s(t.express.Phone))])])]),t._v(" "),s("section",{staticClass:"item end"},[s("h2",[t._v("地址")]),t._v(" "),s("div",{staticClass:"content"},[s("p",[t._v(t._s(t.express.RecAddress))])])])]),t._v(" "),2==t.express.LogisticsStatus?s("section",{staticClass:"confirm",on:{click:t.confirm}},[s("p",[t._v("确认送货")])]):t._e(),t._v(" "),s("br"),t._v(" "),s("br"),t._v(" "),s("br"),t._v(" "),s("br")]),t._v(" "),s("transition",{attrs:{name:"fade"}},[t.showError?s("section",{staticClass:"confirm_details"},[s("section",[s("h2",{staticClass:"title"},[t._v("错误")]),t._v(" "),s("p",[t._v(t._s(t.message)+t._s(t.exceptionMessage))])]),t._v(" "),s("svg",{staticClass:"close_activities",attrs:{width:"60",height:"60"},on:{click:function(e){e.stopPropagation(),t.showErrorFun(e)}}},[s("circle",{attrs:{cx:"30",cy:"30",r:"25",stroke:"#555","stroke-width":"1",fill:"none"}}),t._v(" "),s("line",{staticStyle:{stroke:"#999","stroke-width":"2"},attrs:{x1:"22",y1:"38",x2:"38",y2:"22"}}),t._v(" "),s("line",{staticStyle:{stroke:"#999","stroke-width":"2"},attrs:{x1:"22",y1:"22",x2:"38",y2:"38"}})])]):t._e()]),t._v(" "),s("transition",{attrs:{name:"router-slid",mode:"out-in"}},[s("router-view")],1),t._v(" "),t.showLoading?s("loading"):t._e()],1)},staticRenderFns:[]}}});